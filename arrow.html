<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="data:,">
    <title>MAP GPS</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

<style>


.rotated {
  transform: rotate(0deg); /* Equal to rotateZ(45deg) */
}    
</style>

</head>
<body>


<div style="text-align: center; padding-top: 100px;">
  
    <i class="fa fa-arrow-circle-up rotated" style="font-size:500px;"></i>
</div>





<script>

$(document).ready(function(){

    setInterval(function(){

$.get('http://localhost:8080', function(data){
    console.log(data);
    data = JSON.parse(data);
    console.log(data);
    if(data != null){

        var startLat = data[0].split("=")[1];
        var startLng = data[1].split("=")[1];
        var endLat = data[2].split("=")[1];
        var endLng = data[3].split("=")[1];

        var x = endLat - startLat;
        var y = endLng - startLng;

        var degree = Math.atan2(y,x) * (180 / Math.PI);
        console.log(degree);
        // if(degree<0){
        //     degree = degree+180;
        //     console.log(degree);
        // }
        $('.rotated').css('transform', 'rotate('+0+'deg');
        $('.rotated').css('transform', 'rotate('+degree+'deg');
    }


    
});

    }, 3000);



});

</script>
</body>
</html>